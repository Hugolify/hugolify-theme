{{- with .Params.blocks -}}
  {{- range $index, $block := . -}}
    {{ $isFirst := false }}
    {{ if eq $index 0 }}
      {{ $isFirst = true }}
    {{ end }}
    {{ $block = merge $block (dict "first" $isFirst) }}
    {{ $block = merge $block (dict "index" $index) }}
    {{ $template := printf "blocks/templates/%s.html" .type }}
    {{ partial $template $block }}
  {{- end -}}
{{- end -}}