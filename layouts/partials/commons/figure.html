{{- $animation := partial "func/SetAnim" (dict "element" "figure") -}}
{{ if .screenshot }}
  <div class="screenshot" {{- $animation }}>
    <span></span>
{{ end }}
<figure {{- with .figure_class }} class="{{.}}"{{ end }} {{- if not .screenshot }}{{ $animation }}{{ end }}>
  {{ if .src }}
    {{ partial "commons/image.html" (dict
          "src" .src
          "alt" .alt
          "desktop" .desktop
          "mobile" .mobile
          "lazy" .lazy
          "linear" .linear
          "screenshot" .screenshot
        ) }}
  {{ end }}
  {{ if or .legend .credit }}
  <figcaption>
    {{ with .legend }}
      <p>{{ partial "func/PrepareHTML" . }}</p>
    {{ end }}
    {{ with .credit }}
      <p class="credit">{{ partial "func/PrepareHTML" . | markdownify }}</p>
    {{ end }}
  </figcaption>
  {{ end }}
</figure>
{{ if .screenshot }}
</div>
{{ end }}